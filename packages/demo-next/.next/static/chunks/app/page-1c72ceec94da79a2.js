(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7570:function(e,t,n){"use strict";e.exports=n.p+"static/media/smart_rte_wasm_bg.553431b9.wasm"},1063:function(e,t,n){Promise.resolve().then(n.bind(n,7135))},7135:function(e,t,n){"use strict";let l;n.r(t),n.d(t,{default:function(){return R}});var r={};n.r(r),n.d(r,{Editor:function(){return w},default:function(){return k},initSync:function(){return j}});var i=n(511),o=n(1680);function a(e){let{value:t,onChange:n,placeholder:l="Type here…",minHeight:r=200,maxHeight:a=500,readOnly:d=!1}=e,s=(0,o.useRef)(null),c=(0,o.useRef)(""),u=(0,o.useRef)(!1),_=(0,o.useRef)(null),[p,f]=(0,o.useState)(null),[g,h]=(0,o.useState)(null),m=(0,o.useRef)(null),[w,b]=(0,o.useState)(!1),[y,x]=(0,o.useState)(3),[v,j]=(0,o.useState)(3),[C,k]=(0,o.useState)(null),S=(0,o.useRef)(null),E=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=s.current;if(!e)return;"string"==typeof t&&t!==e.innerHTML&&(e.innerHTML=t||"");let n=e=>{W(e.target)&&e.preventDefault()};return e.addEventListener("contextmenu",n,{capture:!0}),()=>{e.removeEventListener("contextmenu",n,{capture:!0})}},[t]);let T=(e,t)=>{try{document.execCommand(e,!1,t);let l=s.current;if(l&&n){let e=l.innerHTML;e!==c.current&&(c.current=e,n(e))}}catch(e){}},A=e=>{T("formatBlock",e)},R=()=>{if(!p){h(null);return}try{let e=p.getBoundingClientRect();h({left:e.left,top:e.top,width:e.width,height:e.height})}catch(e){h(null)}};(0,o.useEffect)(()=>{R()},[p]),(0,o.useEffect)(()=>{let e=()=>R(),t=()=>R();return window.addEventListener("scroll",e,!0),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",t)}},[]);let M=e=>{try{let t=s.current;if(!t)return;t.focus();let n=window.getSelection(),l=n&&n.rangeCount>0?n.getRangeAt(0):null;l&&t.contains(l.commonAncestorContainer)||((l=document.createRange()).selectNodeContents(t),l.collapse(!1),null==(n=window.getSelection())||n.removeAllRanges(),null==n||n.addRange(l));let r=document.createElement("img");r.src=e,r.style.maxWidth="100%",r.style.height="auto",r.style.display="inline-block",r.alt="image",l?l.insertNode(r):t.appendChild(r);let i=document.createRange();i.setStartAfter(r),i.collapse(!0);let o=window.getSelection();null==o||o.removeAllRanges(),null==o||o.addRange(i),f(r),R(),D()}catch(e){}},L=async e=>{for(let t of Array.from(e).filter(e=>e.type.startsWith("image/")))await new Promise(e=>{let n=new FileReader;n.onload=()=>{let t=String(n.result||"");t&&M(t),e()},n.onerror=()=>e(),n.readAsDataURL(t)})},D=()=>{if(u.current)return;let e=s.current;if(!e||!n)return;let t=e.innerHTML;t!==c.current&&(c.current=t,n(t))},H=(e,t)=>{let n=Math.max(1,Math.min(50,Math.floor(e)||1)),l=Math.max(1,Math.min(20,Math.floor(t)||1)),r='<table style="border-collapse:collapse;width:100%;"><tbody>';for(let e=0;e<n;e++){r+="<tr>";for(let e=0;e<l;e++)r+='<td style="border:1px solid #ddd;padding:6px;min-width:60px;">&nbsp;</td>';r+="</tr>"}return r+"</tbody></table>"},I=()=>{try{let e=s.current;if(!e)return;e.focus();let t=window.getSelection(),n=t&&t.rangeCount>0?t.getRangeAt(0):null;n&&e.contains(n.commonAncestorContainer)||((n=document.createRange()).selectNodeContents(e),n.collapse(!1),null==(t=window.getSelection())||t.removeAllRanges(),null==t||t.addRange(n));let l=H(y,v),r=document.createElement("div");r.innerHTML=l;let i=r.firstChild;if(!i||!n)return;n.insertNode(i);let o=i.querySelector("td,th");o&&z(o,!1),D()}catch(e){}},W=e=>{let t=e;for(;t&&t!==s.current;){if("TD"===t.nodeName||"TH"===t.nodeName)return t;t=t.parentElement}return null},z=(e,t)=>{try{let n=document.createRange();if(!e.firstChild){let t=document.createTextNode("\xa0");e.appendChild(t)}let l=e.firstChild,r=(l.textContent||"").length;n.setStart(l,t?r:0),n.collapse(!0);let i=window.getSelection();null==i||i.removeAllRanges(),null==i||i.addRange(n)}catch(e){}},N=e=>{let t=e.parentElement,n=null==t?void 0:t.parentElement,l=null==n?void 0:n.parentElement;if(!t||!n||!l)return null;let r=Array.from(n.querySelectorAll("tr")).indexOf(t),i=Array.from(t.children).filter(e=>["TD","TH"].includes(e.tagName)).indexOf(e);return{row:t,tbody:n,table:l,rIdx:r,cIdx:i}},O=e=>Array.from(e.children).filter(e=>["TD","TH"].includes(e.tagName)),q=()=>{let e=S.current;if(!e)return;let{tbody:t,sr:n,sc:l,er:r,ec:i}=e,o=Array.from(t.querySelectorAll("tr"));for(let e=n;e<=r;e++){let t=O(o[e]);for(let e=l;e<=i;e++){let n=t[e];n&&(null!=n.__rtePrevBg&&(n.style.background=n.__rtePrevBg,delete n.__rtePrevBg),n.style.outline="",n.style.outlineOffset="")}}S.current=null},P=(e,t,n,l,r)=>{q(),S.current={tbody:e,sr:t,sc:n,er:l,ec:r};let i=Array.from(e.querySelectorAll("tr"));for(let e=t;e<=l;e++){let t=O(i[e]);for(let e=n;e<=r;e++){let n=t[e];n&&(n.__rtePrevBg=n.style.background||"",n.style.background="rgba(30,144,255,0.15)",n.style.outline="2px solid #1e90ff",n.style.outlineOffset="-2px")}}},B=()=>{let e=S.current;return!!e&&(e.sr!==e.er||e.sc!==e.ec)},F=()=>{let e=S.current;if(!e)return;let{tbody:t,sr:n,sc:l,er:r,ec:i}=e,o=Array.from(t.querySelectorAll("tr")),a=O(o[n])[l];if(!a)return;let d=[];for(let e=n;e<=r;e++){let t=O(o[e]);for(let r=l;r<=i;r++){let i=t[r];if(!i||e===n&&r===l)continue;let o=i.innerHTML.trim();o&&d.push(o)}}d.length&&(a.innerHTML=(a.innerHTML||"")+" "+d.join(" ")),a.colSpan=i-l+1,a.rowSpan=r-n+1;for(let e=n;e<=r;e++){let t=O(o[e]);for(let r=i;r>=l;r--){let i=t[r];i&&(e!==n||r!==l)&&i.remove()}}z(a,!1),q(),D()},X=(e,t)=>{let n=N(e);if(!n)return;let{row:l,tbody:r,rIdx:i}=n,o=document.createElement("tr"),a=Array.from(l.children).filter(e=>["TD","TH"].includes(e.tagName)).length;for(let e=0;e<a;e++){let e=document.createElement("td");e.style.border="1px solid #ddd",e.style.padding="6px",e.style.minWidth="60px",e.innerHTML="&nbsp;",o.appendChild(e)}let d=r.children["above"===t?i:i+1]||null;r.insertBefore(o,d)},U=e=>{let t=N(e);if(!t)return;let{row:n,tbody:l,table:r}=t;if(l.removeChild(n),0===l.querySelectorAll("tr").length){var i;null===(i=r.parentElement)||void 0===i||i.removeChild(r)}},Y=(e,t)=>{let n=N(e);if(!n)return;let{tbody:l,cIdx:r}=n,i=Array.from(l.querySelectorAll("tr")),o="left"===t?r:r+1;for(let e of i){let t=Array.from(e.children).filter(e=>["TD","TH"].includes(e.tagName)),n=document.createElement("td");n.style.border="1px solid #ddd",n.style.padding="6px",n.style.minWidth="60px",n.innerHTML="&nbsp;";let l=t[o]||null;l?e.insertBefore(n,l):e.appendChild(n)}},$=e=>{var t;let n=N(e);if(!n)return;let{tbody:l,table:r,cIdx:i}=n;for(let e of Array.from(l.querySelectorAll("tr"))){let t=Array.from(e.children).filter(e=>["TD","TH"].includes(e.tagName))[i];t&&e.removeChild(t)}r.querySelector("td,th")||null===(t=r.parentElement)||void 0===t||t.removeChild(r)},K=e=>{var t;let n="TH"===e.tagName,l=document.createElement(n?"td":"th");l.innerHTML=e.innerHTML||"&nbsp;",l.style.border=e.style.border||"1px solid #ddd",l.style.padding=e.style.padding||"6px",l.style.minWidth=e.style.minWidth||"60px",null===(t=e.parentElement)||void 0===t||t.replaceChild(l,e)},V=e=>{var t;let n=N(e);if(!n)return;let{table:l}=n;null===(t=l.parentElement)||void 0===t||t.removeChild(l)},G=e=>{let t=N(e);if(!t)return;let{tbody:n,rIdx:l,cIdx:r}=t,i=Math.max(1,e.rowSpan||1),o=Math.max(1,e.colSpan||1);if(1===i&&1===o)return;e.rowSpan=1,e.colSpan=1;let a=Array.from(n.querySelectorAll("tr"))[l];for(let e=1;e<o;e++){let t=document.createElement("td");t.style.border="1px solid #ddd",t.style.padding="6px",t.style.minWidth="60px",t.innerHTML="&nbsp;";let n=O(a)[r+e]||null;a.insertBefore(t,n)}for(let e=1;e<i;e++){let t=Array.from(n.querySelectorAll("tr"))[l+e];for(let e=0;e<o;e++){let n=document.createElement("td");n.style.border="1px solid #ddd",n.style.padding="6px",n.style.minWidth="60px",n.innerHTML="&nbsp;";let l=O(t)[r+e]||null;t.insertBefore(n,l)}}D()},J=e=>{let t=N(e);if(!t)return;let{tbody:n}=t,l=n.querySelector("tr");if(!l)return;let r=O(l),i=r.some(e=>"TH"!==e.tagName);for(let e of r){let t="TH"===e.tagName;if(i&&!t){let t=document.createElement("th");t.innerHTML=e.innerHTML||"&nbsp;",t.style.border=e.style.border||"1px solid #ddd",t.style.padding=e.style.padding||"6px",t.style.minWidth=e.style.minWidth||"60px",l.replaceChild(t,e)}else if(!i&&t){let t=document.createElement("td");t.innerHTML=e.innerHTML||"&nbsp;",t.style.border=e.style.border||"1px solid #ddd",t.style.padding=e.style.padding||"6px",t.style.minWidth=e.style.minWidth||"60px",l.replaceChild(t,e)}}},Q=(e,t)=>{let n=S.current;if(n){let t=Array.from(n.tbody.querySelectorAll("tr"));for(let l=n.sr;l<=n.er;l++){let r=O(t[l]);for(let t=n.sc;t<=n.ec;t++){let n=r[t];n&&(n.style.background=e)}}}else t&&(t.style.background=e)},Z=e=>{let t=e=>{let t=e.style.border;e.style.border=t&&"none"!==t?"none":"1px solid #000"},n=S.current;if(n){let e=Array.from(n.tbody.querySelectorAll("tr"));for(let l=n.sr;l<=n.er;l++){let r=O(e[l]);for(let e=n.sc;e<=n.ec;e++){let n=r[e];n&&t(n)}}}else e&&t(e)};return(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:6},children:[(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,padding:8,borderBottom:"1px solid #eee",background:"#fafafa",position:"sticky",top:0,zIndex:1},children:[(0,i.jsx)("input",{ref:_,type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{e.currentTarget.files&&L(e.currentTarget.files),e.currentTarget.value=""}}),(0,i.jsxs)("select",{defaultValue:"p",onChange:e=>{let t=e.target.value;"p"===t?A("<p>"):"h1"===t?A("<h1>"):"h2"===t?A("<h2>"):"h3"===t&&A("<h3>")},title:"Paragraph/Heading",children:[(0,i.jsx)("option",{value:"p",children:"Paragraph"}),(0,i.jsx)("option",{value:"h1",children:"Heading 1"}),(0,i.jsx)("option",{value:"h2",children:"Heading 2"}),(0,i.jsx)("option",{value:"h3",children:"Heading 3"})]}),(0,i.jsx)("button",{onClick:()=>T("bold"),children:"B"}),(0,i.jsx)("button",{onClick:()=>T("italic"),children:"I"}),(0,i.jsx)("button",{onClick:()=>T("underline"),children:"U"}),(0,i.jsx)("button",{onClick:()=>T("strikeThrough"),children:"S"}),(0,i.jsx)("button",{onClick:()=>T("insertUnorderedList"),children:"• List"}),(0,i.jsx)("button",{onClick:()=>T("insertOrderedList"),children:"1. List"}),(0,i.jsx)("button",{onClick:()=>T("formatBlock","<blockquote>"),children:"❝"}),(0,i.jsx)("button",{onClick:()=>T("formatBlock","<pre>"),children:"< />"}),(0,i.jsx)("button",{title:"Formula",onClick:()=>{let e=window.prompt("Enter LaTeX (e.g., E=mc^2)","E=mc^2")||"";if(e)try{let t=s.current;if(!t)return;t.focus();let n=window.getSelection(),l=n&&n.rangeCount>0?n.getRangeAt(0):null;l&&t.contains(l.commonAncestorContainer)||((l=document.createRange()).selectNodeContents(t),l.collapse(!1),null==(n=window.getSelection())||n.removeAllRanges(),null==n||n.addRange(l));let r=document.createElement("span");r.setAttribute("data-formula",e);try{let t=window.katex;t&&"function"==typeof t.render?t.render(e,r,{throwOnError:!1}):r.textContent="$".concat(e,"$")}catch(t){r.textContent="$".concat(e,"$")}l?l.insertNode(r):t.appendChild(r);let i=document.createRange();i.setStartAfter(r),i.collapse(!0);let o=window.getSelection();null==o||o.removeAllRanges(),null==o||o.addRange(i),D()}catch(e){}},children:"∑"}),(0,i.jsx)("button",{onClick:()=>{let e=window.prompt("Enter URL","https://");e&&T("createLink",e)},children:"Link"}),(0,i.jsx)("button",{onClick:()=>T("unlink"),children:"Unlink"}),(0,i.jsx)("button",{onClick:()=>{var e;null===(e=_.current)||void 0===e||e.click()},children:"Image"}),(0,i.jsxs)("div",{style:{display:"inline-flex",gap:4,alignItems:"center",marginLeft:6},children:[(0,i.jsx)("span",{style:{fontSize:12,opacity:.7},children:"Image align:"}),(0,i.jsx)("button",{onClick:()=>{p&&(p.style.display="block",p.style.margin="0 auto",p.style.float="none",R(),D())},title:"Center",children:"⊙"}),(0,i.jsx)("button",{onClick:()=>{p&&(p.style.display="inline",p.style.float="left",p.style.margin="0 8px 8px 0",R(),D())},title:"Float left",children:"⟸"}),(0,i.jsx)("button",{onClick:()=>{p&&(p.style.display="inline",p.style.float="right",p.style.margin="0 0 8px 8px",R(),D())},title:"Float right",children:"⟹"})]}),(0,i.jsx)("button",{onClick:()=>b(!0),children:"+ Table"}),(0,i.jsx)("button",{onClick:()=>T("undo"),children:"Undo"}),(0,i.jsx)("button",{onClick:()=>T("redo"),children:"Redo"})]}),w&&(0,i.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:()=>b(!1),children:(0,i.jsxs)("div",{style:{background:"#fff",padding:16,borderRadius:8,minWidth:280},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"Insert table"}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 18px)",gap:2,padding:6,border:"1px solid #eee"},children:Array.from({length:100}).map((e,t)=>{let n=Math.floor(t/10)+1,l=t%10+1,r=n<=y&&l<=v;return(0,i.jsx)("div",{onMouseEnter:()=>{x(n),j(l)},onClick:()=>{I(),b(!1)},style:{width:16,height:16,border:"1px solid #ccc",background:r?"#1e90ff":"#fff"}},t)})}),(0,i.jsxs)("div",{style:{fontSize:12,minWidth:48},children:[y," \xd7 ",v]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"end",marginTop:12},children:[(0,i.jsx)("button",{onClick:()=>b(!1),children:"Cancel"}),(0,i.jsx)("button",{onClick:()=>{I(),b(!1)},children:"Insert"})]})]})}),(0,i.jsx)("div",{ref:s,contentEditable:!d,suppressContentEditableWarning:!0,onInput:D,onCompositionStart:()=>u.current=!0,onCompositionEnd:()=>{u.current=!1,D()},onPaste:e=>{var t;let n=null===(t=e.clipboardData)||void 0===t?void 0:t.files;n&&n.length&&Array.from(n).some(e=>e.type.startsWith("image/"))&&(e.preventDefault(),L(n))},onDragOver:e=>{var t,n;(null===(n=e.dataTransfer)||void 0===n?void 0:null===(t=n.types)||void 0===t?void 0:t.includes("Files"))&&e.preventDefault()},onDrop:e=>{var t,n;if(null===(n=e.dataTransfer)||void 0===n?void 0:null===(t=n.files)||void 0===t?void 0:t.length){e.preventDefault();let t=e.clientX,n=e.clientY,l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(t,n);else if(document.caretPositionFromPoint){let e=document.caretPositionFromPoint(t,n);e&&(l=document.createRange()).setStart(e.offsetNode,e.offset)}if(l){let e=window.getSelection();null==e||e.removeAllRanges(),null==e||e.addRange(l)}L(e.dataTransfer.files)}},onClick:e=>{let t=e.target;t&&"IMG"===t.tagName?(f(t),R()):(f(null),h(null))},style:{padding:12,minHeight:"number"==typeof r?"".concat(r,"px"):r,maxHeight:"number"==typeof a?"".concat(a,"px"):a,overflowY:"auto",outline:"none",lineHeight:1.6},"data-placeholder":l,onFocus:e=>{let t=e.currentTarget;t.innerHTML&&"<br>"!==t.innerHTML||(t.innerHTML="<p><br></p>")},onKeyDown:e=>{if("Tab"===e.key&&(e.preventDefault(),document.queryCommandState("insertUnorderedList")||document.queryCommandState("insertOrderedList")?T(e.shiftKey?"outdent":"indent"):document.execCommand("insertText",!1,"  ")),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){let t=window.getSelection(),n=W((null==t?void 0:t.anchorNode)||null);if(n&&n.parentElement&&n.parentElement.parentElement){let l=n.parentElement,r=l.parentElement,i=Array.from(l.children).filter(e=>"TD"===e.tagName||"TH"===e.tagName),o=Array.from(r.children),a=o.indexOf(l),d=i.indexOf(n),s=0===((null==t?void 0:t.anchorOffset)||0),c=(n.textContent||"").length,u=((null==t?void 0:t.anchorOffset)||0)>=c,_=null;"ArrowLeft"===e.key&&s&&d>0?_=l.children[d-1]:"ArrowRight"===e.key&&u&&d<l.children.length-1?_=l.children[d+1]:"ArrowUp"===e.key&&a>0&&s?_=o[a-1].children[d]:"ArrowDown"===e.key&&a<o.length-1&&u&&(_=o[a+1].children[d]),_&&(e.preventDefault(),z(_,"ArrowRight"===e.key||"ArrowDown"===e.key))}}},onMouseDown:e=>{let t=W(e.target);if(!t){q();return}let n=N(t);if(!n)return;E.current={tbody:n.tbody,start:t};let l=e=>{let t=W(document.elementFromPoint(e.clientX,e.clientY)),n=E.current;if(!t||!n)return;let l=N(n.start),r=N(t);if(!l||!r||l.tbody!==r.tbody)return;let i=Math.min(l.rIdx,r.rIdx),o=Math.min(l.cIdx,r.cIdx),a=Math.max(l.rIdx,r.rIdx),d=Math.max(l.cIdx,r.cIdx);P(l.tbody,i,o,a,d)},r=()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",r),E.current=null};window.addEventListener("mousemove",l),window.addEventListener("mouseup",r)},onContextMenu:e=>{let t=W(e.target);if(t){e.preventDefault();let n=window.innerWidth,l=window.innerHeight;k({x:Math.max(8,Math.min(e.clientX,n-220-8)),y:Math.max(8,Math.min(e.clientY,l-300-8)),cell:t})}else k(null)},dangerouslySetInnerHTML:{__html:t||""}}),p&&g&&(0,i.jsxs)("div",{style:{position:"fixed",left:g.left,top:g.top,width:g.width,height:g.height,pointerEvents:"none",zIndex:55},children:[(0,i.jsx)("div",{style:{position:"absolute",inset:0,outline:"2px solid #1e90ff",outlineOffset:-2}}),(0,i.jsx)("div",{title:"Resize",onMouseDown:e=>{if(e.preventDefault(),!p)return;m.current={side:"left",startX:e.clientX,startWidth:p.getBoundingClientRect().width};let t=e=>{let t=m.current;if(!t||!p)return;let n=t.startX-e.clientX,l=Math.max(80,Math.round(t.startWidth+n));p.style.width=l+"px",p.style.height="auto",R()},n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),m.current=null,D()};window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)},style:{position:"absolute",left:-6,top:"50%",transform:"translateY(-50%)",width:8,height:24,background:"#1e90ff",borderRadius:2,cursor:"ew-resize",pointerEvents:"auto"}}),(0,i.jsx)("div",{title:"Resize",onMouseDown:e=>{if(e.preventDefault(),!p)return;m.current={side:"right",startX:e.clientX,startWidth:p.getBoundingClientRect().width};let t=e=>{let t=m.current;if(!t||!p)return;let n=e.clientX-t.startX,l=Math.max(80,Math.round(t.startWidth+n));p.style.width=l+"px",p.style.height="auto",R()},n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),m.current=null,D()};window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)},style:{position:"absolute",right:-6,top:"50%",transform:"translateY(-50%)",width:8,height:24,background:"#1e90ff",borderRadius:2,cursor:"ew-resize",pointerEvents:"auto"}})]}),C&&(0,i.jsx)("div",{style:{position:"fixed",inset:0,zIndex:60},onClick:()=>k(null),onContextMenu:e=>{e.preventDefault();let t=window.innerWidth,n=window.innerHeight,l=Math.max(8,Math.min(e.clientX,t-220-8)),r=Math.max(8,Math.min(e.clientY,n-300-8)),i=e.currentTarget,o=i.style.display;i.style.display="none";let a=document.elementFromPoint(e.clientX,e.clientY);i.style.display=o;let d=W(a);d&&k({x:l,y:r,cell:d})},children:(0,i.jsxs)("div",{style:{position:"fixed",left:C.x,top:C.y,background:"#fff",border:"1px solid #ddd",borderRadius:8,boxShadow:"0 8px 24px rgba(0,0,0,0.18)",padding:6,width:200,maxHeight:260,overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:11,margin:"2px 6px 6px"},children:"Table"}),(0,i.jsxs)("div",{style:{display:"grid",gap:4},children:[(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>b(!0),children:[(0,i.jsx)("span",{children:"➕"}),(0,i.jsx)("span",{children:"Insert table…"})]}),(0,i.jsx)("hr",{style:{margin:"4px 0"}}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",padding:"4px 6px",fontSize:12},children:[(0,i.jsx)("span",{children:"Fill:"}),(0,i.jsx)("input",{type:"color",defaultValue:"#ffffff",onChange:e=>{Q(e.target.value,C.cell),k(null)},style:{width:28,height:18,padding:0,border:"none",background:"transparent"}})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{Z(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"▦"}),(0,i.jsx)("span",{children:"Toggle border"})]}),(0,i.jsx)("hr",{style:{margin:"4px 0"}}),(0,i.jsxs)("button",{disabled:!B(),style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12,opacity:B()?1:.5,cursor:B()?"pointer":"default"},onClick:()=>{F(),k(null)},children:[(0,i.jsx)("span",{children:"⇄"}),(0,i.jsx)("span",{children:"Merge cells"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{G(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"⤢"}),(0,i.jsx)("span",{children:"Split cell"})]}),(0,i.jsx)("hr",{style:{margin:"4px 0"}}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{X(C.cell,"above"),k(null)},children:[(0,i.jsx)("span",{children:"↥"}),(0,i.jsx)("span",{children:"Row above"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{X(C.cell,"below"),k(null)},children:[(0,i.jsx)("span",{children:"↧"}),(0,i.jsx)("span",{children:"Row below"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{Y(C.cell,"left"),k(null)},children:[(0,i.jsx)("span",{children:"←"}),(0,i.jsx)("span",{children:"Column left"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{Y(C.cell,"right"),k(null)},children:[(0,i.jsx)("span",{children:"→"}),(0,i.jsx)("span",{children:"Column right"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{U(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"✖"}),(0,i.jsx)("span",{children:"Delete row"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{$(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"✖"}),(0,i.jsx)("span",{children:"Delete column"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{K(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"H"}),(0,i.jsx)("span",{children:"Toggle header"})]}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{J(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"H₁"}),(0,i.jsx)("span",{children:"Toggle header row"})]}),(0,i.jsx)("hr",{style:{margin:"4px 0"}}),(0,i.jsxs)("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 8px",fontSize:12},onClick:()=>{V(C.cell),k(null)},children:[(0,i.jsx)("span",{children:"\uD83D\uDDD1"}),(0,i.jsx)("span",{children:"Delete table"})]})]})]})})]})}let d=null;function s(){return(null===d||0===d.byteLength)&&(d=new Uint8Array(l.memory.buffer)),d}let c="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&c.decode();let u=0;function _(e,t){var n;return e>>>=0,n=e,(u+=t)>=2146435072&&((c="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}}).decode(),u=t),c.decode(s().subarray(n,n+t))}let p=0,f="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},g="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){let n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};function h(e,t,n){if(void 0===n){let n=f.encode(e),l=t(n.length,1)>>>0;return s().subarray(l,l+n.length).set(n),p=n.length,l}let l=e.length,r=t(l,1)>>>0,i=s(),o=0;for(;o<l;o++){let t=e.charCodeAt(o);if(t>127)break;i[r+o]=t}if(o!==l){0!==o&&(e=e.slice(o)),r=n(r,l,l=o+3*e.length,1)>>>0;let t=g(e,s().subarray(r+o,r+l));o+=t.written,r=n(r,l,o,1)>>>0}return p=o,r}let m="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>l.__wbg_editor_free(e>>>0,1));class w{static __wrap(e){e>>>=0;let t=Object.create(w.prototype);return t.__wbg_ptr=e,m.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,m.unregister(this),e}free(){let e=this.__destroy_into_raw();l.__wbg_editor_free(e,0)}static new_empty(){let e=l.editor_new();return w.__wrap(e)}static from_json(e){let t=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=p,r=l.editor_from_json(t,n);return w.__wrap(r)}to_json(){let e,t;try{let n=l.editor_to_json(this.__wbg_ptr);return e=n[0],t=n[1],_(n[0],n[1])}finally{l.__wbindgen_free(e,t,1)}}to_html(){let e,t;try{let n=l.editor_to_html(this.__wbg_ptr);return e=n[0],t=n[1],_(n[0],n[1])}finally{l.__wbindgen_free(e,t,1)}}to_markdown(){let e,t;try{let n=l.editor_to_markdown(this.__wbg_ptr);return e=n[0],t=n[1],_(n[0],n[1])}finally{l.__wbindgen_free(e,t,1)}}to_delta(){let e,t;try{let n=l.editor_to_delta(this.__wbg_ptr);return e=n[0],t=n[1],_(n[0],n[1])}finally{l.__wbindgen_free(e,t,1)}}from_delta(e){let t=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=p;l.editor_from_delta(this.__wbg_ptr,t,n)}insert_table(e,t){l.editor_insert_table(this.__wbg_ptr,e,t)}add_row(e){l.editor_add_row(this.__wbg_ptr,e)}add_col(e){l.editor_add_col(this.__wbg_ptr,e)}move_row(e,t){l.editor_move_row(this.__wbg_ptr,e,t)}move_col(e,t){l.editor_move_col(this.__wbg_ptr,e,t)}delete_row(e){l.editor_delete_row(this.__wbg_ptr,e)}delete_col(e){l.editor_delete_col(this.__wbg_ptr,e)}merge_cells(e,t,n,r){l.editor_merge_cells(this.__wbg_ptr,e,t,n,r)}split_cell(e,t){l.editor_split_cell(this.__wbg_ptr,e,t)}set_cell_style(e,t,n){let r=h(n,l.__wbindgen_malloc,l.__wbindgen_realloc),i=p;l.editor_set_cell_style(this.__wbg_ptr,e,t,r,i)}set_cell_text(e,t,n){let r=h(n,l.__wbindgen_malloc,l.__wbindgen_realloc),i=p;l.editor_set_cell_text(this.__wbg_ptr,e,t,r,i)}set_column_width(e,t){l.editor_set_column_width(this.__wbg_ptr,e,t)}set_freeze(e,t){l.editor_set_freeze(this.__wbg_ptr,e,t)}insert_mcq(e){l.editor_insert_mcq(this.__wbg_ptr,e)}update_mcq(e,t,n,r){let i=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),o=p,a=h(n,l.__wbindgen_malloc,l.__wbindgen_realloc),d=p;l.editor_update_mcq(this.__wbg_ptr,e,i,o,a,d,r)}insert_infobox(e,t){let n=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p,i=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),o=p;l.editor_insert_infobox(this.__wbg_ptr,n,r,i,o)}update_infobox(e,t,n){let r=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),i=p,o=h(n,l.__wbindgen_malloc,l.__wbindgen_realloc),a=p;l.editor_update_infobox(this.__wbg_ptr,e,r,i,o,a)}insert_formula_inline(e){let t=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=p;l.editor_insert_formula_inline(this.__wbg_ptr,t,n)}insert_formula_block(e){let t=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),n=p;l.editor_insert_formula_block(this.__wbg_ptr,t,n)}set_paragraph_text(e,t){let n=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p;l.editor_set_paragraph_text(this.__wbg_ptr,e,n,r)}insert_formula_inline_at(e,t){let n=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p;l.editor_insert_formula_inline_at(this.__wbg_ptr,e,n,r)}insert_formula_block_at(e,t){let n=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p;l.editor_insert_formula_block_at(this.__wbg_ptr,e,n,r)}insert_image_at(e,t,n){let r=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),i=p,o=h(n,l.__wbindgen_malloc,l.__wbindgen_realloc),a=p;l.editor_insert_image_at(this.__wbg_ptr,e,r,i,o,a)}insert_paragraph(e,t){let n=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p;l.editor_insert_paragraph(this.__wbg_ptr,e,n,r)}delete_node(e){l.editor_delete_node(this.__wbg_ptr,e)}insert_table_at(e,t,n){l.editor_insert_table_at(this.__wbg_ptr,e,t,n)}undo(){l.editor_undo(this.__wbg_ptr)}redo(){l.editor_redo(this.__wbg_ptr)}add_comment(e,t){let n,r;try{let i=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),o=p,a=h(t,l.__wbindgen_malloc,l.__wbindgen_realloc),d=p,s=l.editor_add_comment(this.__wbg_ptr,i,o,a,d);return n=s[0],r=s[1],_(s[0],s[1])}finally{l.__wbindgen_free(n,r,1)}}resolve_comment(e,t){let n=h(e,l.__wbindgen_malloc,l.__wbindgen_realloc),r=p;l.editor_resolve_comment(this.__wbg_ptr,n,r,t)}constructor(){let e=l.editor_new();return this.__wbg_ptr=e>>>0,m.register(this,this.__wbg_ptr,this),this}}let b=new Set(["basic","cors","default"]);async function y(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(e.ok&&b.has(e.type)&&"application/wasm"!==e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function x(){let e={};return e.wbg={},e.wbg.__wbg_wbindgenthrow_4c11a24fca429ccf=function(e,t){throw Error(_(e,t))},e.wbg.__wbindgen_init_externref_table=function(){let e=l.__wbindgen_export_0,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}function v(e,t){return l=e.exports,C.__wbindgen_wasm_module=t,d=null,l.__wbindgen_start(),l}function j(e){if(void 0!==l)return l;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));let t=x();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),v(new WebAssembly.Instance(e,t),e)}async function C(e){if(void 0!==l)return l;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new n.U(n(7570)));let t=x();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:i}=await y(await e,t);return v(r,i)}var k=C;let S=null,E=!1,T=new Set;async function A(){E&&S||(await k(),S=r,E=!0)}function R(){let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(null);return((0,o.useEffect)(()=>((async()=>{await A(),l(function(){if(!S)throw Error("SmartRTE wasm not initialized. Call initSmartRTE() first.");let e=new S.Editor;try{T.add(e)}catch(e){}return e}()),t(!0)})(),()=>{}),[]),e)?(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"SmartRTE Demo"}),(0,i.jsx)(a,{})]}):(0,i.jsx)("div",{children:"Loading WASM…"})}}},function(e){e.O(0,[755,991,744],function(){return e(e.s=1063)}),_N_E=e.O()}]);